language: python

sudo: required

env:
  global:
    - HEADLESS=true
  matrix:
    - MARK=webview
    - MARK=legacy RUNSLOW=true

services:
  - docker

before_install:
  - docker info

install:
  - docker-compose build
  - docker-compose up -d

script:
  - docker-compose exec --user root selenium-chrome tox -- -m $MARK

after_success:
  - docker-compose down
